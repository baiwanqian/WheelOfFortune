<!DOCTYPE html>

<html>
  <head>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" type="text/css" href="/static/css/style.css" />
    <link rel="icon" href="/static/favicon.png" type="image/png">
    <title>Ingredients Guessser</title>
  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
      <div class="container">
        <a class="navbar-brand" href="/" onclick = "loadingScreen()">
          <img src="/static/favicon.png" alt="icon" height="25" class="me-2 rounded">
          WheelOfFortune
        </a>
        <div class="navbar-nav ms-auto">
          <a class="nav-link" href="/" onclick = "loadingScreen()">Home</a>
          <a class="nav-link" href="/profile" onclick = "loadingScreen()">Profile</a>
          <a class="nav-link" href="/rewards" onclick = "loadingScreen()">Rewards</a>
          <a class="nav-link" href="/logout" onclick = "loadingScreen()">Logout</a>
        </div>
      </div>
    </nav>

    <div class="main d-flex justify-content-center">
      <form method="POST" action="/ingredients">
        <h1 class = "mb-5 text-center">Play Ingredients Guesser</h1>
        <div class = "row align-items-center">

          <div class = "col-md-6">
            <img src="{{ image_url }}" class="img-fluid rounded" alt="Meal Image">
          </div>

          <div class= "col-md-6">
            <h5 class="mx-3">Which ingredient is in this meal?</h5>

            {% if msg %}
             <div class="mx-3 alert alert-info">
               {{ msg }}
             </div>
           {% endif %}

           {% if not done %}
            <div class="mx-3 mb-3">

              {% for c in choices %}
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="choice" id="choice{{ loop.index }}" value="{{ c }}" required>
                  <label class="form-check-label" for="choice{{ loop.index }}"> {{ c }} </label>
                </div>
              {% endfor %}
            </div>

            <button type="submit" class="mx-3 btn btn-primary">
              Submit Guess
            </button>

          {% else %}
            <button type="submit" name="play_again" class = "mx-3 btn btn-primary" onclick="loadingScreen()">
              Play Again
            </button>

          {% endif %}
          </div>
        </div>

      </form>
    </div>

    <div id="loading-screen" class="hidden">
      <div class="wheel-container">
        <div class="wheel"></div>
        <p class="mt-3">Spinning the wheel...</p>
      </div>
    </div>

    {% if active_creature %}
    <div id="creature-buddy" onclick="creatureSpeak()">
      <img src="/static/creature_images/{{ active_creature.species }}_{{ active_creature.level }}.png" alt="creature">
      <div id="creature-speech" class="hidden"></div>
    </div>
    {% endif %}

    <script src="/static/js/creatureScript.js"></script>

  </body>

  <footer></footer>
</html>
